1687886861 3040 78aafce099ae20fc917923da81609a1c  /cm/shared/apps/spack/0.17.3/cpu/etc/spack/sdsc/tscc/0.17.3/gpu/specs/nvhpc@22.1/vasp@6.4.0.sh 

#!/usr/bin/env bash

#SBATCH --job-name=vasp@6.4.0
#SBATCH --account=sys200
#SBATCH --partition=hotel-gpu
#SBATCH --nodes=1
#SBATCH --ntasks-per-node=1
#SBATCH --cpus-per-task=8
#SBATCH -w gpu1
#SBATCH --time=02:00:00
#SBATCH --output=%x.o%j.%N

declare -xr LOCAL_TIME="$(date +'%Y%m%dT%H%M%S%z')"
declare -xir UNIX_TIME="$(date +'%s')"

declare -xr SYSTEM_NAME='tscc'

declare -xr SPACK_VERSION='0.17.3'
declare -xr SPACK_INSTANCE_NAME='gpu'
declare -xr SPACK_INSTANCE_DIR="/cm/shared/apps/spack/${SPACK_VERSION}/${SPACK_INSTANCE_NAME}"

declare -xr SLURM_JOB_SCRIPT="$(scontrol show job ${SLURM_JOB_ID} | awk -F= '/Command=/{print $2}')"
declare -xr SLURM_JOB_MD5SUM="$(md5sum ${SLURM_JOB_SCRIPT})"

declare -xr SCHEDULER_MODULE='slurm'
declare -xr COMPILER_MODULE='nvhpc@22.1'

echo "${UNIX_TIME} ${SLURM_JOB_ID} ${SLURM_JOB_MD5SUM} ${SLURM_JOB_DEPENDENCY}" 
echo ""

cat "${SLURM_JOB_SCRIPT}"

module purge
module load "${SCHEDULER_MODULE}"
. "${SPACK_INSTANCE_DIR}/share/spack/setup-env.sh"
module use "${SPACK_ROOT}/share/spack/lmod/linux-rocky8-x86_64/Core"
module load "${COMPILER_MODULE}"

# => Error: InstallError: cray-libsci is not installable, you need to specify it as an external package in packages.yaml
#
# /home/mkandes/cm/shared/apps/spack/0.17.3/gpu/var/spack/repos/builtin/packages/cray-libsci/package.py:93, in install:
#         91    def install(self, spec, prefix):
#         92        raise InstallError(
#  >>     93            self.spec.format('{name} is not installable, you need to specify '
#         94                             'it as an external package in packages.yaml'))

# ==> Error: Failed to install vasp6 due to PermissionError: [Errno 1] Operation not permitted: '/home/mkandes/cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky8-cascadelake/gcc-10.2.0/vasp6-6.4.0-3evo6umbfr5wdmropulmo7ntzkev5hqh'

#             A/lib/libCudaUtils_x86_64.a -L/home/mkandes/cm/shared/apps/spack/0.
#            17.3/gpu/opt/spack/linux-rocky8-cascadelake/gcc-10.2.0/cuda-11.2.2-
#            blza2psofa3wr2zumqrnh4je2f7ze3mx/lib64 -lnvToolsExt -lcudart -lcuda
#             -lcufft -lcublas
#  >> 714    /usr/bin/ld: cannot find -lcuda
#  >> 715    collect2: error: ld returned 1 exit status
#     716    make[2]: *** [makefile:149: vasp] Error 1
#     717    make[2]: Leaving directory '/tmp/mkandes/spack-stage/spack-stage-va
#            sp6-6.4.0-3evo6umbfr5wdmropulmo7ntzkev5hqh/spack-src/build/gpu'
#  >> 718    cp: cannot stat 'vasp': No such file or directory
#     719    make[1]: *** [makefile:146: all] Error 1
#     720    make[1]: Leaving directory '/tmp/mkandes/spack-stage/spack-stage-va
#            sp6-6.4.0-3evo6umbfr5wdmropulmo7ntzkev5hqh/spack-src/build/gpu'
#     721    make: *** [makefile:17: gpu] Error 2

declare -xr SPACK_PACKAGE='vasp@6.4.0'
declare -xr SPACK_COMPILER="nvhpc@22.1"
declare -xr SPACK_VARIANTS="+acc +openmp +scalapack ~vaspsol"
declare -xr SPACK_DEPENDENCIES="^qd@2.3.13 % ${SPACK_COMPILER} ^intel-mkl@2020.4.304 % ${SPACK_COMPILER}   ^openmpi@4.0.5 % ${SPACK_COMPILER}"
declare -xr SPACK_SPEC="${SPACK_PACKAGE} % ${SPACK_COMPILER} ${SPACK_VARIANTS} ${SPACK_DEPENDENCIES}"

printenv

spack config get compilers
spack config get config  
spack config get mirrors
spack config get modules
spack config get packages
spack config get repos
spack config get upstreams

spack spec --long --namespaces --types vasp@6.4.0 % nvhpc@22.1 +acc +openmp +scalapack ~vaspsol "${SPACK_DEPENDENCIES}"
if [[ "${?}" -ne 0 ]]; then
  echo 'ERROR: spack concretization failed.'
  exit 1
fi

export LD_LIBRARY_PATH=/cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/nvhpc-22.1-rsks4ptuwyfjjxigybva7k53ihgacw3y/Linux_x86_64/22.1/compilers/lib:$LD_LIBRARY_PATH
time -p spack install -v --jobs 1 --fail-fast --yes-to-all vasp@6.4.0 % nvhpc@22.1  +acc  +openmp +scalapack  ~vaspsol "${SPACK_DEPENDENCIES}"
if [[ "${?}" -ne 0 ]]; then
  echo 'ERROR: spack install failed.'
  exit 1
fi

spack module lmod refresh --delete-tree -y

sbatch --dependency="afterok:${SLURM_JOB_ID}" ''

sleep 20
Lmod has detected the following error: The following module(s) are unknown:
"nvhpc@22.1"

Please check the spelling or version number. Also try "module spider ..."
It is also possible your cache file is out-of-date; it may help to try:
  $ module --ignore_cache load "nvhpc@22.1"

Also make sure that all modulefiles written in TCL start with the string
#%Module



SHELL=/bin/bash
SLURM_JOB_USER=jpg
SLURM_TASKS_PER_NODE=1
SLURM_JOB_UID=422
HISTCONTROL=ignoredups
SLURM_JOB_MD5SUM=78aafce099ae20fc917923da81609a1c  /cm/shared/apps/spack/0.17.3/cpu/etc/spack/sdsc/tscc/0.17.3/gpu/specs/nvhpc@22.1/vasp@6.4.0.sh
SLURM_TASK_PID=408351
LMOD_arch=x86_64
SLURM_LOCALID=0
SLURM_SUBMIT_DIR=/cm/shared/apps/spack/0.17.3/cpu/etc/spack/sdsc/tscc/0.17.3/gpu/specs/nvhpc@22.1
HOSTNAME=gpu1
HISTSIZE=1000
SLURMD_NODENAME=gpu1
FPATH=/usr/share/lmod/lmod/init/ksh_funcs
_ModuleTable002_=cGFjay9sbW9kL2xpbnV4LXJvY2t5OC14ODZfNjQvQ29yZSIsIi9jbS9zaGFyZWQvbW9kdWxlZmlsZXMiLCIvY20vbG9jYWwvbW9kdWxlZmlsZXMiLCIvZXRjL21vZHVsZWZpbGVzIiwiL3Vzci9zaGFyZS9tb2R1bGVmaWxlcyIsIi91c3Ivc2hhcmUvTW9kdWxlcy9tb2R1bGVmaWxlcyIsfSxbInN5c3RlbUJhc2VNUEFUSCJdPSIvY20vbG9jYWwvbW9kdWxlZmlsZXM6L2NtL3NoYXJlZC9tb2R1bGVmaWxlczovZXRjL21vZHVsZWZpbGVzOi91c3Ivc2hhcmUvbW9kdWxlZmlsZXM6L3Vzci9zaGFyZS9Nb2R1bGVzL21vZHVsZWZpbGVzIix9
SPACK_LD_LIBRARY_PATH=/cm/shared/apps/slurm/current/lib64/slurm:/cm/shared/apps/slurm/current/lib64
__LMOD_REF_COUNT_MODULEPATH=/cm/shared/apps/spack/0.17.3/gpu/share/spack/lmod/linux-rocky8-x86_64/Core:1;/cm/shared/modulefiles:2;/cm/local/modulefiles:1;/etc/modulefiles:1;/usr/share/modulefiles:1;/usr/share/Modules/modulefiles:1
SLURM_NODE_ALIASES=(null)
SLURM_CLUSTER_NAME=slurm
SLURM_JOB_SCRIPT=/cm/shared/apps/spack/0.17.3/cpu/etc/spack/sdsc/tscc/0.17.3/gpu/specs/nvhpc@22.1/vasp@6.4.0.sh
COMPILER_MODULE=nvhpc@22.1
SCHEDULER_MODULE=slurm
SPACK_INSTANCE_NAME=gpu
SLURM_CPUS_ON_NODE=8
__LMOD_REF_COUNT__LMFILES_=/cm/local/modulefiles/slurm/slurm/22.05.9:1
SLURM_JOB_CPUS_PER_NODE=8
SPACK_VARIANTS=+acc +openmp +scalapack ~vaspsol
LMOD_DIR=/usr/share/lmod/lmod/libexec
SPACK_DEPENDENCIES=^qd@2.3.13 % nvhpc@22.1 ^intel-mkl@2020.4.304 % nvhpc@22.1   ^openmpi@4.0.5 % nvhpc@22.1
PWD=/home/jpg/specs_gpu_0.17.3/nvhpc@22.1
SLURM_GTIDS=0
LOGNAME=jpg
XDG_SESSION_TYPE=tty
SLURM_JOB_PARTITION=hotel-gpu
MODULESHOME=/usr/share/lmod/lmod
MANPATH=/cm/shared/apps/slurm/current/man:/usr/share/lmod/lmod/share/man:/usr/local/share/man:/usr/share/man:/cm/local/apps/environment-modules/current/share/man
LMOD_PREPEND_BLOCK=normal
SLURM_JOB_NUM_NODES=1
SPACK_INSTANCE_DIR=/cm/shared/apps/spack/0.17.3/gpu
SPACK_PYTHON=/usr/bin/python3
SLURM_JOBID=3040
SLURM_JOB_QOS=normal
MOTD_SHOWN=pam
__LMOD_REF_COUNT_PATH=/cm/shared/apps/slurm/current/sbin:1;/cm/shared/apps/slurm/current/bin:1;/home/jpg/usr/bin:2;/home/jpg/bin:3;/home/jpg/.local/bin:1;/usr/local/bin:1;/usr/bin:1;/usr/local/sbin:1;/usr/sbin:1
HOME=/home/jpg
_ModuleTable_Sz_=2
__LMOD_REF_COUNT_LIBRARY_PATH=/cm/shared/apps/slurm/current/lib64/slurm:1;/cm/shared/apps/slurm/current/lib64:1
LANG=en_US.UTF-8
__LMOD_REF_COUNT_LOADEDMODULES=slurm/slurm/22.05.9:1
LS_COLORS=rs=0:di=01;34:ln=01;36:mh=00:pi=40;33:so=01;35:do=01;35:bd=40;33;01:cd=40;33;01:or=40;31;01:mi=01;37;41:su=37;41:sg=30;43:ca=30;41:tw=30;42:ow=34;42:st=37;44:ex=01;32:*.tar=01;31:*.tgz=01;31:*.arc=01;31:*.arj=01;31:*.taz=01;31:*.lha=01;31:*.lz4=01;31:*.lzh=01;31:*.lzma=01;31:*.tlz=01;31:*.txz=01;31:*.tzo=01;31:*.t7z=01;31:*.zip=01;31:*.z=01;31:*.dz=01;31:*.gz=01;31:*.lrz=01;31:*.lz=01;31:*.lzo=01;31:*.xz=01;31:*.zst=01;31:*.tzst=01;31:*.bz2=01;31:*.bz=01;31:*.tbz=01;31:*.tbz2=01;31:*.tz=01;31:*.deb=01;31:*.rpm=01;31:*.jar=01;31:*.war=01;31:*.ear=01;31:*.sar=01;31:*.rar=01;31:*.alz=01;31:*.ace=01;31:*.zoo=01;31:*.cpio=01;31:*.7z=01;31:*.rz=01;31:*.cab=01;31:*.wim=01;31:*.swm=01;31:*.dwm=01;31:*.esd=01;31:*.jpg=01;35:*.jpeg=01;35:*.mjpg=01;35:*.mjpeg=01;35:*.gif=01;35:*.bmp=01;35:*.pbm=01;35:*.pgm=01;35:*.ppm=01;35:*.tga=01;35:*.xbm=01;35:*.xpm=01;35:*.tif=01;35:*.tiff=01;35:*.png=01;35:*.svg=01;35:*.svgz=01;35:*.mng=01;35:*.pcx=01;35:*.mov=01;35:*.mpg=01;35:*.mpeg=01;35:*.m2v=01;35:*.mkv=01;35:*.webm=01;35:*.webp=01;35:*.ogm=01;35:*.mp4=01;35:*.m4v=01;35:*.mp4v=01;35:*.vob=01;35:*.qt=01;35:*.nuv=01;35:*.wmv=01;35:*.asf=01;35:*.rm=01;35:*.rmvb=01;35:*.flc=01;35:*.avi=01;35:*.fli=01;35:*.flv=01;35:*.gl=01;35:*.dl=01;35:*.xcf=01;35:*.xwd=01;35:*.yuv=01;35:*.cgm=01;35:*.emf=01;35:*.ogv=01;35:*.ogx=01;35:*.aac=01;36:*.au=01;36:*.flac=01;36:*.m4a=01;36:*.mid=01;36:*.midi=01;36:*.mka=01;36:*.mp3=01;36:*.mpc=01;36:*.ogg=01;36:*.ra=01;36:*.wav=01;36:*.oga=01;36:*.opus=01;36:*.spx=01;36:*.xspf=01;36:
SLURM_PROCID=0
__LMOD_REF_COUNT_CPATH=/cm/shared/apps/slurm/current/include:1
LMOD_SETTARG_FULL_SUPPORT=no
SPACK_COMPILER=nvhpc@22.1
TMPDIR=/tmp
SLURM_CPUS_PER_TASK=8
SLURM_NTASKS=1
SLURM_TOPOLOGY_ADDR=gpu1
LMOD_VERSION=8.5
SSH_CONNECTION=70.95.66.35 49639 132.249.107.93 22
SPACK_ROOT=/cm/shared/apps/spack/0.17.3/gpu
MODULEPATH_ROOT=/usr/share/modulefiles
SLURM_TOPOLOGY_ADDR_PATTERN=node
XDG_SESSION_CLASS=user
LMOD_PKG=/usr/share/lmod/lmod
SLURM_WORKING_CLUSTER=slurm:mgr2:6817:9728:109
TERM=xterm-256color
LESSOPEN=||/usr/bin/lesspipe.sh %s
USER=jpg
LIBRARY_PATH=/cm/shared/apps/slurm/current/lib64/slurm:/cm/shared/apps/slurm/current/lib64
SLURM_NODELIST=gpu1
ENVIRONMENT=BATCH
LOADEDMODULES=slurm/slurm/22.05.9
SPACK_SPEC=vasp@6.4.0 % nvhpc@22.1 +acc +openmp +scalapack ~vaspsol ^qd@2.3.13 % nvhpc@22.1 ^intel-mkl@2020.4.304 % nvhpc@22.1   ^openmpi@4.0.5 % nvhpc@22.1
SLURM_JOB_ACCOUNT=sys200
SLURM_PRIO_PROCESS=0
SLURM_NPROCS=1
LMOD_ROOT=/usr/share/lmod
LMOD_SETTARG_CMD=:
SHLVL=2
SLURM_NNODES=1
BASH_ENV=/usr/share/lmod/lmod/init/bash
LMOD_FULL_SETTARG_SUPPORT=no
LMOD_sys=Linux
__LMOD_REF_COUNT_MANPATH=/cm/shared/apps/slurm/current/man:1;/usr/share/lmod/lmod/share/man:1;/usr/local/share/man:1;/usr/share/man:1;/cm/local/apps/environment-modules/current/share/man:1
XDG_SESSION_ID=90526
SLURM_SUBMIT_HOST=login1
__LMOD_SET_FPATH=1
_ModuleTable001_=X01vZHVsZVRhYmxlXz17WyJNVHZlcnNpb24iXT0zLFsiY19yZWJ1aWxkVGltZSJdPWZhbHNlLFsiY19zaG9ydFRpbWUiXT1mYWxzZSxkZXB0aFQ9e30sZmFtaWx5PXt9LG1UPXtzbHVybT17WyJmbiJdPSIvY20vbG9jYWwvbW9kdWxlZmlsZXMvc2x1cm0vc2x1cm0vMjIuMDUuOSIsWyJmdWxsTmFtZSJdPSJzbHVybS9zbHVybS8yMi4wNS45IixbImxvYWRPcmRlciJdPTEscHJvcFQ9e30sWyJzdGFja0RlcHRoIl09MCxbInN0YXR1cyJdPSJhY3RpdmUiLFsidXNlck5hbWUiXT0ic2x1cm0iLFsid1YiXT0iKnNsdXJtLzAwMDAwMDAyMi4wMDAwMDAwMDUuMDAwMDAwMDA5Lip6ZmluYWwiLH0sfSxtcGF0aEE9eyIvY20vc2hhcmVkL2FwcHMvc3BhY2svMC4xNy4zL2dwdS9zaGFyZS9z
SPACK_PACKAGE=vasp@6.4.0
LD_LIBRARY_PATH=/cm/shared/apps/slurm/current/lib64/slurm:/cm/shared/apps/slurm/current/lib64
XDG_RUNTIME_DIR=/run/user/422
LMOD_COLORIZE=yes
SLURM_JOB_ID=3040
SLURM_NODEID=0
S_COLORS=auto
SSH_CLIENT=70.95.66.35 49639 22
DEBUGINFOD_URLS=https://debuginfod.centos.org/ 
CMD_WLM_CLUSTER_NAME=slurm
ENABLE_LMOD=1
which_declare=declare -f
UNIX_TIME=1687886861
__Init_Default_Modules=1
SLURM_CONF=/cm/shared/apps/slurm/var/etc/slurm/slurm.conf
PATH=/cm/shared/apps/spack/0.17.3/gpu/bin:/cm/shared/apps/slurm/current/sbin:/cm/shared/apps/slurm/current/bin:/home/jpg/usr/bin:/home/jpg/bin:/home/jpg/.local/bin:/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin
SLURM_JOB_NAME=vasp@6.4.0
LOCAL_TIME=20230627T102741-0700
MODULEPATH=/cm/shared/apps/spack/0.17.3/gpu/share/spack/lmod/linux-rocky8-x86_64/Core:/cm/shared/modulefiles:/cm/local/modulefiles:/etc/modulefiles:/usr/share/modulefiles:/usr/share/Modules/modulefiles
SLURM_NTASKS_PER_NODE=1
_LMFILES_=/cm/local/modulefiles/slurm/slurm/22.05.9
SYSTEM_NAME=tscc
DBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/422/bus
LMOD_CMD=/usr/share/lmod/lmod/libexec/lmod
MAIL=/var/spool/mail/jpg
SSH_TTY=/dev/pts/1
__LMOD_REF_COUNT_LD_LIBRARY_PATH=/cm/shared/apps/slurm/current/lib64/slurm:1;/cm/shared/apps/slurm/current/lib64:1
LMOD_SYSTEM_DEFAULT_MODULES=DefaultModules
SLURM_JOB_GID=7193
CPATH=/cm/shared/apps/slurm/current/include
SPACK_VERSION=0.17.3
OLDPWD=/home/jpg/specs_gpu_0.17.3
SLURM_JOB_NODELIST=gpu1
BASH_FUNC_ml%%=() {  eval $($LMOD_DIR/ml_cmd "$@")
}
BASH_FUNC_which%%=() {  ( alias;
 eval ${which_declare} ) | /usr/bin/which --tty-only --read-alias --read-functions --show-tilde --show-dot $@
}
BASH_FUNC_module%%=() {  eval $($LMOD_CMD bash "$@") && eval $(${LMOD_SETTARG_CMD:-:} -s sh)
}
BASH_FUNC__spack_shell_wrapper%%=() {  for var in LD_LIBRARY_PATH DYLD_LIBRARY_PATH DYLD_FALLBACK_LIBRARY_PATH;
 do
 eval "if [ -n \"\${${var}-}\" ]; then export SPACK_$var=\${${var}}; fi";
 done;
 if [ -n "${ZSH_VERSION:-}" ]; then
 emulate -L sh;
 fi;
 _sp_flags="";
 while [ ! -z ${1+x} ] && [ "${1#-}" != "${1}" ]; do
 _sp_flags="$_sp_flags $1";
 shift;
 done;
 if [ -n "$_sp_flags" ] && [ "${_sp_flags#*h}" != "${_sp_flags}" ] || [ "${_sp_flags#*V}" != "${_sp_flags}" ]; then
 command spack $_sp_flags "$@";
 return;
 fi;
 _sp_subcommand="";
 if [ ! -z ${1+x} ]; then
 _sp_subcommand="$1";
 shift;
 fi;
 case $_sp_subcommand in 
 "cd")
 _sp_arg="";
 if [ -n "$1" ]; then
 _sp_arg="$1";
 shift;
 fi;
 if [ "$_sp_arg" = "-h" ] || [ "$_sp_arg" = "--help" ]; then
 command spack cd -h;
 else
 LOC="$(spack location $_sp_arg "$@")";
 if [ -d "$LOC" ]; then
 cd "$LOC";
 else
 return 1;
 fi;
 fi;
 return
 ;;
 "env")
 _sp_arg="";
 if [ -n "$1" ]; then
 _sp_arg="$1";
 shift;
 fi;
 if [ "$_sp_arg" = "-h" ] || [ "$_sp_arg" = "--help" ]; then
 command spack env -h;
 else
 case $_sp_arg in 
 activate)
 _a=" $@";
 if [ -z ${1+x} ] || [ "${_a#* --sh}" != "$_a" ] || [ "${_a#* --csh}" != "$_a" ] || [ "${_a#* -h}" != "$_a" ] || [ "${_a#* --help}" != "$_a" ]; then
 command spack env activate "$@";
 else
 stdout="$(command spack $_sp_flags env activate --sh "$@")" || return;
 eval "$stdout";
 fi
 ;;
 deactivate)
 _a=" $@";
 if [ "${_a#* --sh}" != "$_a" ] || [ "${_a#* --csh}" != "$_a" ]; then
 command spack env deactivate "$@";
 else
 if [ -n "$*" ]; then
 command spack env deactivate -h;
 else
 stdout="$(command spack $_sp_flags env deactivate --sh)" || return;
 eval "$stdout";
 fi;
 fi
 ;;
 *)
 command spack env $_sp_arg "$@"
 ;;
 esac;
 fi;
 return
 ;;
 "load" | "unload")
 _a=" $@";
 if [ "${_a#* --sh}" != "$_a" ] || [ "${_a#* --csh}" != "$_a" ] || [ "${_a#* -h}" != "$_a" ] || [ "${_a#* --list}" != "$_a" ] || [ "${_a#* --help}" != "$_a" ]; then
 command spack $_sp_flags $_sp_subcommand "$@";
 else
 stdout="$(command spack $_sp_flags $_sp_subcommand --sh "$@")" || return;
 eval "$stdout";
 fi
 ;;
 *)
 command spack $_sp_flags $_sp_subcommand "$@"
 ;;
 esac
}
BASH_FUNC_spack%%=() {  : this is a shell function from: /cm/shared/apps/spack/0.17.3/gpu/share/spack/setup-env.sh;
 : the real spack script is here: /cm/shared/apps/spack/0.17.3/gpu/bin/spack;
 _spack_shell_wrapper "$@";
 return $?
}
_=/usr/bin/printenv
compilers:
- compiler:
    spec: gcc@11.2.0
    paths:
      cc: /usr/bin/gcc
      cxx: /usr/bin/g++
      f77: /usr/bin/gfortran
      fc: /usr/bin/gfortran
    flags:
      cflags: -O2 -march=native
      cxxflags: -O2 -march=native
      fflags: -O2 -march=native
    operating_system: rocky9
    target: x86_64
    modules: []
    environment: {}
    extra_rpaths: []
- compiler:
    spec: intel@19.1.1.217
    paths:
      cc: /cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/intel-19.1.1.217-7fcjggodrui3okoovfgtjf6gl5nf6nlv/bin/icc
      cxx: /cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/intel-19.1.1.217-7fcjggodrui3okoovfgtjf6gl5nf6nlv/bin/icpc
      f77: /cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/intel-19.1.1.217-7fcjggodrui3okoovfgtjf6gl5nf6nlv/bin/ifort
      fc: /cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/intel-19.1.1.217-7fcjggodrui3okoovfgtjf6gl5nf6nlv/bin/ifort
    flags:
      cflags: -gcc-name=/cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/gcc-8.5.0-mf5bqu2cwyzoxa5c7btqbbdxng3whbmf/bin/gcc
      cxxflags: -gcc-name=/cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/gcc-8.5.0-mf5bqu2cwyzoxa5c7btqbbdxng3whbmf/bin/gcc
      fflags: -gcc-name=/cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/gcc-8.5.0-mf5bqu2cwyzoxa5c7btqbbdxng3whbmf/bin/gcc
    operating_system: rocky9
    target: x86_64
    modules: []
    environment: {}
    extra_rpaths: []
- compiler:
    spec: gcc@10.2.0
    paths:
      cc: /cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/gcc-10.2.0-mqbpsxf6a5jhxi4vlwdtfyqe7q3yjgse/bin/gcc
      cxx: /cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/gcc-10.2.0-mqbpsxf6a5jhxi4vlwdtfyqe7q3yjgse/bin/g++
      f77: /cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/gcc-10.2.0-mqbpsxf6a5jhxi4vlwdtfyqe7q3yjgse/bin/gfortran
      fc: /cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/gcc-10.2.0-mqbpsxf6a5jhxi4vlwdtfyqe7q3yjgse/bin/gfortran
    flags: {}
    operating_system: rocky9
    target: x86_64
    modules: []
    environment: {}
    extra_rpaths: []
- compiler:
    spec: gcc@9.2.0
    paths:
      cc: /cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/gcc-9.2.0-nx6afhcfe2pccw7nla4fjmvdqvbhieh6/bin/gcc
      cxx: /cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/gcc-9.2.0-nx6afhcfe2pccw7nla4fjmvdqvbhieh6/bin/g++
      f77: /cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/gcc-9.2.0-nx6afhcfe2pccw7nla4fjmvdqvbhieh6/bin/gfortran
      fc: /cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/gcc-9.2.0-nx6afhcfe2pccw7nla4fjmvdqvbhieh6/bin/gfortran
    flags: {}
    operating_system: rocky9
    target: x86_64
    modules: []
    environment: {}
    extra_rpaths: []
- compiler:
    spec: gcc@8.5.0
    paths:
      cc: /cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/gcc-8.5.0-mf5bqu2cwyzoxa5c7btqbbdxng3whbmf/bin/gcc
      cxx: /cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/gcc-8.5.0-mf5bqu2cwyzoxa5c7btqbbdxng3whbmf/bin/g++
      f77: /cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/gcc-8.5.0-mf5bqu2cwyzoxa5c7btqbbdxng3whbmf/bin/gfortran
      fc: /cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/gcc-8.5.0-mf5bqu2cwyzoxa5c7btqbbdxng3whbmf/bin/gfortran
    flags: {}
    operating_system: rocky9
    target: x86_64
    modules: []
    environment: {}
    extra_rpaths: []
- compiler:
    spec: nvhpc@22.1
    paths:
      cc: /cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/nvhpc-22.1-rsks4ptuwyfjjxigybva7k53ihgacw3y/Linux_x86_64/22.1/compilers/bin/nvc
      cxx: /cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/nvhpc-22.1-rsks4ptuwyfjjxigybva7k53ihgacw3y/Linux_x86_64/22.1/compilers/bin/nvc++
      f77: /cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/nvhpc-22.1-rsks4ptuwyfjjxigybva7k53ihgacw3y/Linux_x86_64/22.1/compilers/bin/nvfortran
      fc: /cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/nvhpc-22.1-rsks4ptuwyfjjxigybva7k53ihgacw3y/Linux_x86_64/22.1/compilers/bin/nvfortran
    flags: {}
    operating_system: rocky9
    target: x86_64
    modules: [nvhpc/22.1]
    environment: {}
    extra_rpaths: []
config:
  install_tree:
    root: $spack/opt/spack
    projections:
      all: ${ARCHITECTURE}/${COMPILERNAME}-${COMPILERVER}/${PACKAGE}-${VERSION}-${HASH}
  template_dirs:
  - $spack/share/spack/templates

  # Temporary locations Spack can try to use for builds.
  #
  # Recommended options are given below.
  #
  # Builds can be faster in temporary directories on some (e.g., HPC) systems.
  # Specifying `$tempdir` will ensure use of the default temporary directory
  # (i.e., ``$TMP` or ``$TMPDIR``).
  #
  # Another option that prevents conflicts and potential permission issues is
  # to specify `$user_cache_path/stage`, which ensures each user builds in their
  # home directory.
  #
  # A more traditional path uses the value of `$spack/var/spack/stage`, which
  # builds directly inside Spack's instance without staging them in a
  # temporary space.  Problems with specifying a path inside a Spack instance
  # are that it precludes its use as a system package and its ability to be
  # pip installable.
  #
  # In any case, if the username is not already in the path, Spack will append
  # the value of `$user` in an attempt to avoid potential conflicts between
  # users in shared temporary spaces.
  #
  # The build stage can be purged with `spack clean --stage` and
  # `spack clean -a`, so it is important that the specified directory uniquely
  # identifies Spack staging to avoid accidentally wiping out non-Spack work.
  build_stage:
  - $tempdir/$user/spack-stage
  - $user_cache_path/stage
  # - $spack/var/spack/stage

  # Directory in which to run tests and store test results.
  # Tests will be stored in directories named by date/time and package
  # name/hash.
  test_stage: $user_cache_path/test
  source_cache: $spack/var/spack/cache
  misc_cache: $user_cache_path/cache
  connect_timeout: 10
  verify_ssl: true
  suppress_gpg_warnings: false
  install_missing_compilers: false
  checksum: true
  deprecated: false
  dirty: false
  build_language: C
  locks: true
  url_fetch_method: urllib
  ccache: false
  concretizer: clingo
  db_lock_timeout: 3
  package_lock_timeout: null
  shared_linking: rpath
  allow_sgid: true
  terminal_title: false
  debug: false
  build_jobs: 16
mirrors:
  spack-public: https://mirror.spack.io
modules:
  default:
    'enable:':
    - lmod
    lmod:
      core_compilers:
      - gcc@11.2.0
      hierarchy:
      - mpi
      hash_length: 7
      blacklist_implicits: true
      naming_scheme: '{name}/{version}'
      projections:
        all: '{name}/{version}'
      adol-c:
        suffixes:
          +openmp: omp
      amdblis:
        suffixes:
          threads=openmp: omp
      fftw:
        suffixes:
          +openmp: omp
      hpl:
        suffixes:
          +openmp: omp
      hypre:
        suffixes:
          +openmp: omp
      intel:
        environment:
          set:
            INTEL_LICENSE_FILE: 40000@elprado.sdsc.edu:40100@elprado.sdsc.edu
      kokkos:
        suffixes:
          +openmp: omp
      intel-mkl:
        suffixes:
          threads=openmp: omp
      openblas:
        suffixes:
          threads=openmp: omp
          +ilp64: ilp64
      'netlib-scalapack:':
        suffixes:
          ^openblas threads=openmp: omp
      petsc:
        suffixes:
          +complex: cmplx
      slepc:
        suffixes:
          ^petsc +complex: cmplx
      ^python:
        autoload: direct
      ^ucx:
        autoload: direct
  prefix_inspections:
    lib:
    - LD_LIBRARY_PATH
    lib64:
    - LD_LIBRARY_PATH
    bin:
    - PATH
    man:
    - MANPATH
    share/man:
    - MANPATH
    share/aclocal:
    - ACLOCAL_PATH
    lib/pkgconfig:
    - PKG_CONFIG_PATH
    lib64/pkgconfig:
    - PKG_CONFIG_PATH
    share/pkgconfig:
    - PKG_CONFIG_PATH
    ? ''
    : - CMAKE_PREFIX_PATH

  # These are configurations for the module set named "default"
packages:
  lustre:
    externals:
    - spec: lustre@2.15.2 % gcc@11.2.0 arch=linux-rocky9-broadwell
      prefix: /usr
    - spec: lustre@2.15.2 % gcc@10.2.0 arch=linux-rocky9-broadwell
      prefix: /usr
    - spec: lustre@2.15.2 % gcc@9.2.0 arch=linux-rocky9-broadwell
      prefix: /usr
    - spec: lustre@2.15.2 % gcc@8.5.0 arch=linux-rocky9-broadwell
      prefix: /usr
    - spec: lustre@2.15.2 % intel@19.1.1.217 arch=linux-rocky9-broadwell
      prefix: /usr
    - spec: lustre@2.15.2 % aocc@3.2.0 arch=linux-rocky9-broadwell
      prefix: /usr
    buildable: false
  texlive:
    externals:
    - spec: texive@live % gcc@10.2.0 arch=linux-rocky9-broadwell
      prefix: /usr
    - spec: texive@live % gcc@9.2.0 arch=linux-rocky9-broadwell
      prefix: /usr
    - spec: texlive@live % intel@19.1.1.217 arch=linux-rocky9-broadwell
      prefix: /usr
    buildable: false
  openmpi:
    externals:
    - spec: openmpi@4.0.5 % nvhpc@22.1 arch=linux-rocky9-broadwell
      prefix: /cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/nvhpc-22.1-rsks4ptuwyfjjxigybva7k53ihgacw3y/Linux_x86_64/22.1/comm_libs/openmpi4/openmpi-4.0.5
    buildable: true
  qd:
    externals:
    - spec: qd@2.3.13 % nvhpc@22.1 arch=linux-rocky9-broadwell
      prefix: /apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/nvhpc-22.1-rsks4ptuwyfjjxigybva7k53ihgacw3y/Linux_x86_64/22.1/compilers/extras/qd
    buildable: false
  openssl:
    externals:
    - spec: openssl@3.0.7 % gcc@11.2.0 arch=linux-rocky9-broadwell
      prefix: /usr
    - spec: openssl@3.0.7 % gcc@10.2.0 arch=linux-rocky9-broadwell
      prefix: /usr
    - spec: openssl@3.0.7 % gcc@9.2.0 arch=linux-rocky9-broadwell
      prefix: /usr
    - spec: openssl@3.0.7 % intel@19.1.1.217 arch=linux-rocky9-broadwell
      prefix: /usr
    buildable: false
  rdma-core:
    externals:
    - spec: rdma-core@44.0 % gcc@10.2.0 arch=linux-rocky9-broadwell
      prefix: /usr
    - spec: rdma-core@44.0 % gcc@9.2.0 arch=linux-rocky9-broadwell
      prefix: /usr
    - spec: rdma-core@44.0 % intel@19.1.1.217 arch=linux-rocky9-broadwell
      prefix: /usr
    buildable: false
  hcoll:
    externals:
    - spec: hcoll@4.4.2968 % gcc@10.2.0 arch=linux-rocky9-broadwell
      prefix: /opt/mellanox/hcoll
    - spec: hcoll@4.4.2968 % gcc@9.2.0 arch=linux-rocky9-broadwell
      prefix: /opt/mellanox/hcoll
    - spec: hcoll@4.4.2968 % intel@19.1.1.217 arch=linux-rocky9-broadwell
      prefix: /opt/mellanox/hcoll
    buildable: false
  slurm:
    externals:
    - spec: slurm@22.05.9 % gcc@8.5.0 arch=linux-rocky9-broadwell
      prefix: /cm/shared/apps/slurm/22.05.9
    - spec: slurm@22.05.9 % gcc@11.2.0 arch=linux-rocky9-broadwell
      prefix: /cm/shared/apps/slurm/22.05.9
    - spec: slurm@22.05.9 % gcc@10.2.0 arch=linux-rocky9-broadwell
      prefix: /cm/shared/apps/slurm/22.05.9
    - spec: slurm@22.05.9 % gcc@9.2.0 arch=linux-rocky9-broadwell
      prefix: /cm/shared/apps/slurm/22.05.9
    - spec: slurm@22.05.9 % intel@19.1.1.217 arch=linux-rocky9-broadwell
      prefix: /cm/shared/apps/slurm/22.05.9
    buildable: false
  librsvg:
    externals:
    - spec: librsvg@2.42.7 % gcc@10.2.0 arch=linux-rocky9-broadwell
      prefix: /usr
    - spec: librsvg@2.42.7 % gcc@9.2.0 arch=linux-rocky9-broadwell
      prefix: /usr
    - spec: librsvg@2.42.7 %  intel@19.1.1.217 arch=linux-rocky9-broadwell
      prefix: /usr
    buildable: false
  ghostscript:
    externals:
    - spec: ghostscript@9.27 % gcc@10.2.0 arch=linux-rocky9-broadwell
      prefix: /usr
    buildable: false
  gaussian:
    permissions:
      read: group
      group: jpg
  vasp6:
    permissions:
      read: group
      group: vasp-6
  all:
    compiler: [gcc, intel, pgi, clang, xl, nag, fj, aocc]
    providers:
      awk: [gawk]
      blas: [openblas, amdblis]
      D: [ldc]
      daal: [intel-daal]
      elf: [elfutils]
      fftw-api: [fftw, amdfftw]
      flame: [libflame, amdlibflame]
      fuse: [libfuse]
      gl: [mesa+opengl, mesa18, opengl]
      glu: [mesa-glu, openglu]
      glx: [mesa+glx, mesa18+glx, opengl]
      golang: [gcc]
      iconv: [libiconv]
      ipp: [intel-ipp]
      java: [openjdk, jdk, ibm-java]
      jpeg: [libjpeg-turbo, libjpeg]
      lapack: [openblas, amdlibflame]
      lua-lang: [lua, lua-luajit]
      mariadb-client: [mariadb-c-client, mariadb]
      mkl: [intel-mkl]
      mpe: [mpe2]
      mpi: [openmpi, mpich]
      mysql-client: [mysql, mariadb-c-client]
      opencl: [pocl]
      onedal: [intel-oneapi-dal]
      osmesa: [mesa+osmesa, mesa18+osmesa]
      pbs: [openpbs, torque]
      pil: [py-pillow]
      pkgconfig: [pkgconf, pkg-config]
      rpc: [libtirpc]
      scalapack: [netlib-scalapack, amdscalapack]
      sycl: [hipsycl]
      szip: [libaec, libszip]
      tbb: [intel-tbb]
      unwind: [libunwind]
      uuid: [util-linux-uuid, libuuid]
      xxd: [xxd-standalone, vim]
      yacc: [bison, byacc]
      ziglang: [zig]
    permissions:
      read: world
      write: user
repos:
- $spack/var/spack/repos/sdsc
- $spack/var/spack/repos/builtin
upstreams: {}
Input spec
--------------------------------
[    ]  .vasp@6.4.0%nvhpc@22.1+acc+openmp+scalapack~vaspsol
[    ]      ^.intel-mkl@2020.4.304%nvhpc@22.1
[    ]      ^.openmpi@4.0.5%nvhpc@22.1
[    ]      ^.qd@2.3.13%nvhpc@22.1

Concretized
--------------------------------
ag2cxdt  [    ]  sdsc.vasp@6.4.0%nvhpc@22.1+acc+openmp+scalapack~vaspsol arch=linux-rocky9-broadwell
5ju37t4  [bl  ]      ^builtin.intel-mkl@2020.4.304%nvhpc@22.1~ilp64+shared threads=none arch=linux-rocky9-broadwell
y65baif  [b   ]          ^builtin.cpio@2.13%nvhpc@22.1 arch=linux-rocky9-broadwell
dgrtk2d  [blr ]      ^sdsc.openmpi@4.0.5%nvhpc@22.1~atomics~cuda~cxx~cxx_exceptions~gpfs~internal-hwloc~java~legacylaunchers~lustre~memchecker~pmi+pmix+romio+rsh~singularity+static+vt+wrapper-rpath cuda_arch=none fabrics=none patches=60ce20bc14d98c572ef7883b9fcd254c3f232c2f3a13377480f96466169ac4c8,fba0d3a784a9723338722b48024a22bb32f6a951db841a4e9f08930a93f41d7a schedulers=none arch=linux-rocky9-broadwell
3iwoyr6  [bl  ]      ^builtin.qd@2.3.13%nvhpc@22.1 arch=linux-rocky9-broadwell
od6nfym  [b   ]      ^builtin.rsync@3.2.3%gcc@11.2.0 cflags="-O2 -march=native" cxxflags="-O2 -march=native" fflags="-O2 -march=native"  arch=linux-rocky9-broadwell
bsl7drv  [bl  ]          ^builtin.lz4@1.9.3%gcc@11.2.0 cflags="-O2 -march=native" cxxflags="-O2 -march=native" fflags="-O2 -march=native"  libs=shared,static arch=linux-rocky9-broadwell
ifgpx3o  [bl  ]          ^builtin.openssl@3.0.7%gcc@11.2.0 cflags="-O2 -march=native" cxxflags="-O2 -march=native" fflags="-O2 -march=native" ~docs certs=system arch=linux-rocky9-broadwell
zr5gqvz  [bl  ]          ^builtin.popt@1.16%gcc@11.2.0 cflags="-O2 -march=native" cxxflags="-O2 -march=native" fflags="-O2 -march=native"  arch=linux-rocky9-broadwell
yzeufvl  [bl  ]              ^builtin.libiconv@1.16%gcc@11.2.0 cflags="-O2 -march=native" cxxflags="-O2 -march=native" fflags="-O2 -march=native"  libs=shared,static arch=linux-rocky9-broadwell
tizrgfz  [bl  ]          ^builtin.xxhash@0.8.0%gcc@11.2.0 cflags="-O2 -march=native" cxxflags="-O2 -march=native" fflags="-O2 -march=native"  arch=linux-rocky9-broadwell
d5vrjbq  [bl  ]          ^builtin.zlib@1.2.11%gcc@11.2.0 cflags="-O2 -march=native" cxxflags="-O2 -march=native" fflags="-O2 -march=native" +optimize+pic+shared arch=linux-rocky9-broadwell
jnu2b4f  [bl  ]          ^builtin.zstd@1.5.0%gcc@11.2.0 cflags="-O2 -march=native" cxxflags="-O2 -march=native" fflags="-O2 -march=native" ~programs arch=linux-rocky9-broadwell

[+] /cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/nvhpc-22.1/cpio-2.13-y65baifivit7j665rzqt5vcxnv5djrvg
[+] /cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/nvhpc-22.1-rsks4ptuwyfjjxigybva7k53ihgacw3y/Linux_x86_64/22.1/comm_libs/openmpi4/openmpi-4.0.5 (external openmpi-4.0.5-dgrtk2dtzhu4yalk2l3wjg7pbj2dzqy7)
[+] /apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/nvhpc-22.1-rsks4ptuwyfjjxigybva7k53ihgacw3y/Linux_x86_64/22.1/compilers/extras/qd (external qd-2.3.13-3iwoyr6g4k62tla77er555e3njxhvs2w)
[+] /cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/lz4-1.9.3-bsl7drvkpgd3yk25bd3jgztm2majhsnl
[+] /usr (external openssl-3.0.7-ifgpx3ow5hg4g2ehfqrxnyzxoxaybzvg)
[+] /cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/libiconv-1.16-yzeufvlscix43nlwc4xmjvoioyd3u676
[+] /cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/xxhash-0.8.0-tizrgfzs32zkoyg2bo66byqcsk7z3lba
[+] /cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/zlib-1.2.11-d5vrjbqy4clsgux2z3psmh5fp7j2viis
[+] /cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/zstd-1.5.0-jnu2b4f7ozfmhkv5jopketihpsig4flx
[+] /cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/nvhpc-22.1/intel-mkl-2020.4.304-5ju37t4gibnbupc6lodzmjj5oc5kwzdj
[+] /cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/popt-1.16-zr5gqvz2rpbcmkjp6x7b2jnj4idzhl5g
[+] /cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/rsync-3.2.3-od6nfymrlsah7iszto2wcc5vobjnlog7
==> Installing vasp-6.4.0-ag2cxdtjagobtnzwckl74lc6ktv3sm5h
==> No binary for vasp-6.4.0-ag2cxdtjagobtnzwckl74lc6ktv3sm5h found: installing from source
==> Using cached archive: /cm/shared/apps/spack/0.17.3/gpu/var/spack/cache/_source-cache/archive/34/34399c61694babbc23b5b8823d5d3634d7cd5ad0a622af4c108e2843ed344af8.tgz
==> No patches needed for vasp
==> vasp: Executing phase: 'edit'
==> [2023-06-27-10:28:25.879667] FILTER FILE: makefile.include [replacing "OBJECTS_LIB = linpack_double.o"]
==> [2023-06-27-10:28:25.881113] FILTER FILE: makefile.include [replacing "^CPP_OPTIONS[ ]{0,}=[ ]{0,}"]
==> [2023-06-27-10:28:25.881904] FILTER FILE: makefile.include [replacing "^FFLAGS[ ]{0,}=[ ]{0,}"]
==> [2023-06-27-10:28:25.882644] FILTER FILE: makefile.include [replacing "^LIBDIR[ ]{0,}=.*$"]
==> [2023-06-27-10:28:25.883374] FILTER FILE: makefile.include [replacing "^BLAS[ ]{0,}=.*$"]
==> [2023-06-27-10:28:25.884097] FILTER FILE: makefile.include [replacing "^LAPACK[ ]{0,}=.*$"]
==> [2023-06-27-10:28:25.884831] FILTER FILE: makefile.include [replacing "^FFTW[ ]{0,}?=.*$"]
==> [2023-06-27-10:28:25.885563] FILTER FILE: makefile.include [replacing "^MPI_INC[ ]{0,}=.*$"]
==> [2023-06-27-10:28:25.886282] FILTER FILE: makefile.include [replacing "-DscaLAPACK.*$
"]
==> [2023-06-27-10:28:25.886983] FILTER FILE: makefile.include [replacing "^SCALAPACK[ ]{0,}=.*$"]
==> [2023-06-27-10:28:25.888325] FILTER FILE: makefile.include [replacing "INCS.*=.*FFTW.*/include"]
==> [2023-06-27-10:28:25.889056] FILTER FILE: makefile.include [replacing "LLIBS.*lfftw3.*"]
==> [2023-06-27-10:28:25.889907] FILTER FILE: makefile.include [replacing "cuda11.0"]
==> vasp: Executing phase: 'build'
==> [2023-06-27-10:28:25.914829] 'make' 'std' 'gam' 'ncl'
if [ ! -d build/std ] ; then mkdir -p build/std  ; fi
cp src/makefile src/.objects src/makedeps.awk makefile.include build/std 
make -C build/std VERSION=std check
make[1]: Entering directory '/tmp/jpg/spack-stage/spack-stage-vasp-6.4.0-ag2cxdtjagobtnzwckl74lc6ktv3sm5h/spack-src/build/std'
exit 0
make[1]: Leaving directory '/tmp/jpg/spack-stage/spack-stage-vasp-6.4.0-ag2cxdtjagobtnzwckl74lc6ktv3sm5h/spack-src/build/std'
make -C build/std VERSION=std cleandependencies -j1
make[1]: Entering directory '/tmp/jpg/spack-stage/spack-stage-vasp-6.4.0-ag2cxdtjagobtnzwckl74lc6ktv3sm5h/spack-src/build/std'
rm -f .depend
make[1]: Leaving directory '/tmp/jpg/spack-stage/spack-stage-vasp-6.4.0-ag2cxdtjagobtnzwckl74lc6ktv3sm5h/spack-src/build/std'
make -C build/std VERSION=std all
make[1]: Entering directory '/tmp/jpg/spack-stage/spack-stage-vasp-6.4.0-ag2cxdtjagobtnzwckl74lc6ktv3sm5h/spack-src/build/std'
rsync -ru ../../src/lib .
cp makefile.include lib
make -C lib -j1
make[2]: Entering directory '/tmp/jpg/spack-stage/spack-stage-vasp-6.4.0-ag2cxdtjagobtnzwckl74lc6ktv3sm5h/spack-src/build/std/lib'
make libdmy.a
make[3]: Entering directory '/tmp/jpg/spack-stage/spack-stage-vasp-6.4.0-ag2cxdtjagobtnzwckl74lc6ktv3sm5h/spack-src/build/std/lib'
nvfortran -Mpreprocess -Mfree -Mextend -E preclib.F > preclib.f90
nvfortran -O1 -Mfixed -Mfree -c -o preclib.o preclib.f90
nvc -w -O -c -o timing_.o timing_.c
nvc -w -O -c -o derrf_.o derrf_.c
nvc -w -O -c -o dclock_.o dclock_.c
nvfortran -Mpreprocess -Mfree -Mextend -E diolib.F > diolib.f90
nvfortran -O1 -Mfixed -Mfree -c -o diolib.o diolib.f90
nvfortran -Mpreprocess -Mfree -Mextend -E dlexlib.F > dlexlib.f90
nvfortran -O1 -Mfixed -Mfree -c -o dlexlib.o dlexlib.f90
nvfortran -Mpreprocess -Mfree -Mextend -E drdatab.F > drdatab.f90
nvfortran -O1 -Mfixed -Mfree -c -o drdatab.o drdatab.f90
nvfortran -O1 -Mfixed  -c linpack_double.f
nvc -w -O -c -o getshmem.o getshmem.c
rm -f libdmy.a
ar vq libdmy.a preclib.o timing_.o derrf_.o dclock_.o diolib.o dlexlib.o drdatab.o linpack_double.o getshmem.o
ar: creating libdmy.a
a - preclib.o
a - timing_.o
a - derrf_.o
a - dclock_.o
a - diolib.o
a - dlexlib.o
a - drdatab.o
a - linpack_double.o
a - getshmem.o
make[3]: Leaving directory '/tmp/jpg/spack-stage/spack-stage-vasp-6.4.0-ag2cxdtjagobtnzwckl74lc6ktv3sm5h/spack-src/build/std/lib'
make[2]: Leaving directory '/tmp/jpg/spack-stage/spack-stage-vasp-6.4.0-ag2cxdtjagobtnzwckl74lc6ktv3sm5h/spack-src/build/std/lib'
rsync -ru ../../src/parser .
cp makefile.include parser
make -C parser -j1
make[2]: Entering directory '/tmp/jpg/spack-stage/spack-stage-vasp-6.4.0-ag2cxdtjagobtnzwckl74lc6ktv3sm5h/spack-src/build/std/parser'
make libparser.a
make[3]: Entering directory '/tmp/jpg/spack-stage/spack-stage-vasp-6.4.0-ag2cxdtjagobtnzwckl74lc6ktv3sm5h/spack-src/build/std/parser'
nvc++ --no_warnings -D YY_parse_DEBUG=1 -c sites.cpp -o sites.o
nvc++ --no_warnings -D YY_parse_DEBUG=1 -c functions.cpp -o functions.o
nvc++ --no_warnings -D YY_parse_DEBUG=1 -c radial.cpp -o radial.o
nvc++ --no_warnings -D YY_parse_DEBUG=1 -c basis.cpp -o basis.o
nvc++ --no_warnings -D YY_parse_DEBUG=1 -c lex.yy.c -o lex.yy.o
nvc++ --no_warnings -D YY_parse_DEBUG=1 -c locproj.tab.c -o locproj.tab.o
nvc++ --no_warnings -D YY_parse_DEBUG=1 -c yywrap.c -o yywrap.o
rm -f libparser.a
ar vq libparser.a sites.o functions.o radial.o basis.o lex.yy.o locproj.tab.o yywrap.o locproj.tab.h
ar: creating libparser.a
a - sites.o
a - functions.o
a - radial.o
a - basis.o
a - lex.yy.o
a - locproj.tab.o
a - yywrap.o
a - locproj.tab.h
make[3]: Leaving directory '/tmp/jpg/spack-stage/spack-stage-vasp-6.4.0-ag2cxdtjagobtnzwckl74lc6ktv3sm5h/spack-src/build/std/parser'
make[2]: Leaving directory '/tmp/jpg/spack-stage/spack-stage-vasp-6.4.0-ag2cxdtjagobtnzwckl74lc6ktv3sm5h/spack-src/build/std/parser'
rsync -u ../../src/*.F ../../src/*.inc .
make build_info
make[2]: Entering directory '/tmp/jpg/spack-stage/spack-stage-vasp-6.4.0-ag2cxdtjagobtnzwckl74lc6ktv3sm5h/spack-src/build/std'
printf "    character(len=*), parameter :: cpp_options = '&\n&-DMPI &\n&-DMPI_BLOCK=8000 &\n&-Duse_collective &\n&-DCACHE_SIZE=4000 &\n&-Davoidalloc &\n&-Duse_bse_te &\n&-Dtbdyn &\n&-Duse_shmem &\n&-Dfock_dblbuf &\n&-D_OPENMP &\n&-DHOST=\"LinuxGNU\" &\n&-Dvasp6 &\n&-DMPI_INPLACE &\n&-D_OPENACC &\n&-DUSENCCL &\n&-DUSENCCLP2P &\n&-Dqd_emulate &\n&-DscaLAPACK'\n" >  build_info.inc
printf "    character(len=*), parameter :: link_line   = '&\n&mpif90 &\n&-acc &\n&-gpu=cc60,cc70,cc80,cuda11.5 &\n&-mp &\n&-c++libs &\n&-Llib &\n&-ldmy &\n&-Lparser &\n&-lparser &\n&-cudalib=cublas,cusolver,cufft,nccl &\n&-cuda &\n&-L/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/nvhpc-22.1-rsks4ptuwyfjjxigybva7k53ihgacw3y/Linux_x86_64/22.1/compilers/extras/qd/lib &\n&-lqdmod &\n&-lqd &\n&-L/path/to/your/scalapack/installation/lib &\n&-lscalapack &\n&-Mmkl'\n"   >> build_info.inc
printf "    character(len=*), parameter :: fc     = '&\n&mpif90 &\n&-acc &\n&-gpu=cc60,cc70,cc80,cuda11.5 &\n&-mp'\n"     >>  build_info.inc
printf "    character(len=*), parameter :: fcl    = '&\n&mpif90 &\n&-acc &\n&-gpu=cc60,cc70,cc80,cuda11.5 &\n&-mp &\n&-c++libs'\n"    >> build_info.inc
printf "    character(len=*), parameter :: fflags = '&\n&-Mnoupcase &\n&-Mbackslash &\n&-Mlarge_arrays &\n&-tp &\n&host &\n&-tp &\n&host'\n" >> build_info.inc
printf "    character(len=*), parameter :: llibs  = '&\n&-cudalib=cublas,cusolver,cufft,nccl &\n&-cuda &\n&-L/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/nvhpc-22.1-rsks4ptuwyfjjxigybva7k53ihgacw3y/Linux_x86_64/22.1/compilers/extras/qd/lib &\n&-lqdmod &\n&-lqd &\n&-L/path/to/your/scalapack/installation/lib &\n&-lscalapack &\n&-Mmkl'\n"  >>  build_info.inc
printf "    character(len=*), parameter :: incs   = '&\n&-I/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/nvhpc-22.1-rsks4ptuwyfjjxigybva7k53ihgacw3y/Linux_x86_64/22.1/compilers/extras/qd/include/qd &\n&-I/cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/nvhpc-22.1/intel-mkl-2020.4.304-5ju37t4gibnbupc6lodzmjj5oc5kwzdj/compilers_and_libraries_2020.4.304/linux/mkl/include/fftw'\n"   >> build_info.inc
make[2]: Leaving directory '/tmp/jpg/spack-stage/spack-stage-vasp-6.4.0-ag2cxdtjagobtnzwckl74lc6ktv3sm5h/spack-src/build/std'
rm -f vasp ; make vasp ; cp vasp ../../bin/vasp_std
make[2]: Entering directory '/tmp/jpg/spack-stage/spack-stage-vasp-6.4.0-ag2cxdtjagobtnzwckl74lc6ktv3sm5h/spack-src/build/std'
nvfortran -Mpreprocess -Mfree -Mextend -E -DMPI -DMPI_BLOCK=8000 -Duse_collective -DCACHE_SIZE=4000 -Davoidalloc -Duse_bse_te -Dtbdyn -Duse_shmem -Dfock_dblbuf -D_OPENMP -DHOST=\"LinuxGNU\" -Dvasp6 -DMPI_INPLACE -D_OPENACC -DUSENCCL -DUSENCCLP2P -Dqd_emulate -DscaLAPACK c2f_interface.F > c2f_interface.f90 -DNGZhalf
mpif90 -acc -gpu=cc60,cc70,cc80,cuda11.5 -mp -Mfree -Mnoupcase -Mbackslash -Mlarge_arrays -tp host -tp host -fast -I/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/nvhpc-22.1-rsks4ptuwyfjjxigybva7k53ihgacw3y/Linux_x86_64/22.1/compilers/extras/qd/include/qd -I/cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/nvhpc-22.1/intel-mkl-2020.4.304-5ju37t4gibnbupc6lodzmjj5oc5kwzdj/compilers_and_libraries_2020.4.304/linux/mkl/include/fftw  -c c2f_interface.f90
/cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/nvhpc-22.1-rsks4ptuwyfjjxigybva7k53ihgacw3y/Linux_x86_64/22.1/comm_libs/openmpi4/openmpi-4.0.5/bin/.bin/mpif90: error while loading shared libraries: libnvcpumath.so: cannot open shared object file: No such file or directory
make[2]: *** [makefile:167: c2f_interface.o] Error 127
make[2]: Leaving directory '/tmp/jpg/spack-stage/spack-stage-vasp-6.4.0-ag2cxdtjagobtnzwckl74lc6ktv3sm5h/spack-src/build/std'
cp: cannot stat 'vasp': No such file or directory
make[1]: *** [makefile:129: all] Error 1
make[1]: Leaving directory '/tmp/jpg/spack-stage/spack-stage-vasp-6.4.0-ag2cxdtjagobtnzwckl74lc6ktv3sm5h/spack-src/build/std'
make: *** [makefile:17: std] Error 2
==> Error: ProcessError: Command exited with status 2:
    'make' 'std' 'gam' 'ncl'

2 errors found in build log:
     98     printf "    character(len=*), parameter :: incs   = '&\n&-I/apps/sp
            ack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/nvhpc-22
            .1-rsks4ptuwyfjjxigybva7k53ihgacw3y/Linux_x86_64/22.1/compilers/ext
            ras/qd/include/qd &\n&-I/cm/shared/apps/spack/0.17.3/gpu/opt/spack/
            linux-rocky9-broadwell/nvhpc-22.1/intel-mkl-2020.4.304-5ju37t4gibnb
            upc6lodzmjj5oc5kwzdj/compilers_and_libraries_2020.4.304/linux/mkl/i
            nclude/fftw'\n"   >> build_info.inc
     99     make[2]: Leaving directory '/tmp/jpg/spack-stage/spack-stage-vasp-6
            .4.0-ag2cxdtjagobtnzwckl74lc6ktv3sm5h/spack-src/build/std'
     100    rm -f vasp ; make vasp ; cp vasp ../../bin/vasp_std
     101    make[2]: Entering directory '/tmp/jpg/spack-stage/spack-stage-vasp-
            6.4.0-ag2cxdtjagobtnzwckl74lc6ktv3sm5h/spack-src/build/std'
     102    nvfortran -Mpreprocess -Mfree -Mextend -E -DMPI -DMPI_BLOCK=8000 -D
            use_collective -DCACHE_SIZE=4000 -Davoidalloc -Duse_bse_te -Dtbdyn 
            -Duse_shmem -Dfock_dblbuf -D_OPENMP -DHOST=\"LinuxGNU\" -Dvasp6 -DM
            PI_INPLACE -D_OPENACC -DUSENCCL -DUSENCCLP2P -Dqd_emulate -DscaLAPA
            CK c2f_interface.F > c2f_interface.f90 -DNGZhalf
     103    mpif90 -acc -gpu=cc60,cc70,cc80,cuda11.5 -mp -Mfree -Mnoupcase -Mba
            ckslash -Mlarge_arrays -tp host -tp host -fast -I/apps/spack/0.17.3
            /gpu/opt/spack/linux-rocky9-broadwell/gcc-11.2.0/nvhpc-22.1-rsks4pt
            uwyfjjxigybva7k53ihgacw3y/Linux_x86_64/22.1/compilers/extras/qd/inc
            lude/qd -I/cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-b
            roadwell/nvhpc-22.1/intel-mkl-2020.4.304-5ju37t4gibnbupc6lodzmjj5oc
            5kwzdj/compilers_and_libraries_2020.4.304/linux/mkl/include/fftw  -
            c c2f_interface.f90
  >> 104    /cm/shared/apps/spack/0.17.3/gpu/opt/spack/linux-rocky9-broadwell/g
            cc-11.2.0/nvhpc-22.1-rsks4ptuwyfjjxigybva7k53ihgacw3y/Linux_x86_64/
            22.1/comm_libs/openmpi4/openmpi-4.0.5/bin/.bin/mpif90: error while 
            loading shared libraries: libnvcpumath.so: cannot open shared objec
            t file: No such file or directory
     105    make[2]: *** [makefile:167: c2f_interface.o] Error 127
     106    make[2]: Leaving directory '/tmp/jpg/spack-stage/spack-stage-vasp-6
            .4.0-ag2cxdtjagobtnzwckl74lc6ktv3sm5h/spack-src/build/std'
  >> 107    cp: cannot stat 'vasp': No such file or directory
     108    make[1]: *** [makefile:129: all] Error 1
     109    make[1]: Leaving directory '/tmp/jpg/spack-stage/spack-stage-vasp-6
            .4.0-ag2cxdtjagobtnzwckl74lc6ktv3sm5h/spack-src/build/std'
     110    make: *** [makefile:17: std] Error 2

See build log for details:
  /tmp/jpg/spack-stage/spack-stage-vasp-6.4.0-ag2cxdtjagobtnzwckl74lc6ktv3sm5h/spack-build-out.txt

==> Error: Terminating after first install failure: ProcessError: Command exited with status 2:
    'make' 'std' 'gam' 'ncl'
real 30.02
user 21.53
sys 4.78
ERROR: spack install failed.
